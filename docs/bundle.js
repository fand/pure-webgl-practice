!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nin vec3 position;\nuniform mat4 mvpMatrix;\nuniform float time;\n\nvoid main(void) {\n    gl_Position = mvpMatrix * vec4(position, 1.0);\n    gl_PointSize = 10.;\n}\n"},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nout vec4 fragColor;\n\nvoid main(void){\n    vec2 uv = gl_FragCoord.xy / resolution;\n    fragColor = vec4(uv.x, uv.y, abs(sin(time)), 1.0);\n\n    vec2 p = (gl_FragCoord.xy * 2. - resolution) / min(resolution.x, resolution.y);\n    if (length(p) < .3) {\n        fragColor.rgb = 1. - fragColor.rgb;\n    }\n}\n"},function(t,e,r){"use strict";r.r(e);var n={};r.d(n,"create",function(){return s}),r.d(n,"clone",function(){return a}),r.d(n,"copy",function(){return u}),r.d(n,"fromValues",function(){return l}),r.d(n,"set",function(){return h}),r.d(n,"identity",function(){return c}),r.d(n,"transpose",function(){return f}),r.d(n,"invert",function(){return g}),r.d(n,"adjoint",function(){return d}),r.d(n,"determinant",function(){return m}),r.d(n,"multiply",function(){return p}),r.d(n,"translate",function(){return v}),r.d(n,"scale",function(){return T}),r.d(n,"rotate",function(){return E}),r.d(n,"rotateX",function(){return x}),r.d(n,"rotateY",function(){return b}),r.d(n,"rotateZ",function(){return y}),r.d(n,"fromTranslation",function(){return M}),r.d(n,"fromScaling",function(){return _}),r.d(n,"fromRotation",function(){return A}),r.d(n,"fromXRotation",function(){return R}),r.d(n,"fromYRotation",function(){return w}),r.d(n,"fromZRotation",function(){return U}),r.d(n,"fromRotationTranslation",function(){return L}),r.d(n,"getTranslation",function(){return F}),r.d(n,"getScaling",function(){return S}),r.d(n,"getRotation",function(){return D}),r.d(n,"fromRotationTranslationScale",function(){return P}),r.d(n,"fromRotationTranslationScaleOrigin",function(){return I}),r.d(n,"fromQuat",function(){return C}),r.d(n,"frustum",function(){return X}),r.d(n,"perspective",function(){return B}),r.d(n,"perspectiveFromFieldOfView",function(){return N}),r.d(n,"ortho",function(){return G}),r.d(n,"lookAt",function(){return O}),r.d(n,"targetTo",function(){return q}),r.d(n,"str",function(){return k}),r.d(n,"frob",function(){return Y}),r.d(n,"add",function(){return W}),r.d(n,"subtract",function(){return j}),r.d(n,"multiplyScalar",function(){return z}),r.d(n,"multiplyScalarAndAdd",function(){return V}),r.d(n,"exactEquals",function(){return H}),r.d(n,"equals",function(){return K}),r.d(n,"mul",function(){return Q}),r.d(n,"sub",function(){return Z});const i=1e-6;let o="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function s(){let t=new o(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function a(t){let e=new o(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function l(t,e,r,n,i,s,a,u,l,h,c,f,g,d,m,p){let v=new o(16);return v[0]=t,v[1]=e,v[2]=r,v[3]=n,v[4]=i,v[5]=s,v[6]=a,v[7]=u,v[8]=l,v[9]=h,v[10]=c,v[11]=f,v[12]=g,v[13]=d,v[14]=m,v[15]=p,v}function h(t,e,r,n,i,o,s,a,u,l,h,c,f,g,d,m,p){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=s,t[6]=a,t[7]=u,t[8]=l,t[9]=h,t[10]=c,t[11]=f,t[12]=g,t[13]=d,t[14]=m,t[15]=p,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,e){if(t===e){let r=e[1],n=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function g(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],g=e[11],d=e[12],m=e[13],p=e[14],v=e[15],T=r*a-n*s,E=r*u-i*s,x=r*l-o*s,b=n*u-i*a,y=n*l-o*a,M=i*l-o*u,_=h*m-c*d,A=h*p-f*d,R=h*v-g*d,w=c*p-f*m,U=c*v-g*m,L=f*v-g*p,F=T*L-E*U+x*w+b*R-y*A+M*_;return F?(F=1/F,t[0]=(a*L-u*U+l*w)*F,t[1]=(i*U-n*L-o*w)*F,t[2]=(m*M-p*y+v*b)*F,t[3]=(f*y-c*M-g*b)*F,t[4]=(u*R-s*L-l*A)*F,t[5]=(r*L-i*R+o*A)*F,t[6]=(p*x-d*M-v*E)*F,t[7]=(h*M-f*x+g*E)*F,t[8]=(s*U-a*R+l*_)*F,t[9]=(n*R-r*U-o*_)*F,t[10]=(d*y-m*x+v*T)*F,t[11]=(c*x-h*y-g*T)*F,t[12]=(a*A-s*w-u*_)*F,t[13]=(r*w-n*A+i*_)*F,t[14]=(m*E-d*b-p*T)*F,t[15]=(h*b-c*E+f*T)*F,t):null}function d(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],g=e[11],d=e[12],m=e[13],p=e[14],v=e[15];return t[0]=a*(f*v-g*p)-c*(u*v-l*p)+m*(u*g-l*f),t[1]=-(n*(f*v-g*p)-c*(i*v-o*p)+m*(i*g-o*f)),t[2]=n*(u*v-l*p)-a*(i*v-o*p)+m*(i*l-o*u),t[3]=-(n*(u*g-l*f)-a*(i*g-o*f)+c*(i*l-o*u)),t[4]=-(s*(f*v-g*p)-h*(u*v-l*p)+d*(u*g-l*f)),t[5]=r*(f*v-g*p)-h*(i*v-o*p)+d*(i*g-o*f),t[6]=-(r*(u*v-l*p)-s*(i*v-o*p)+d*(i*l-o*u)),t[7]=r*(u*g-l*f)-s*(i*g-o*f)+h*(i*l-o*u),t[8]=s*(c*v-g*m)-h*(a*v-l*m)+d*(a*g-l*c),t[9]=-(r*(c*v-g*m)-h*(n*v-o*m)+d*(n*g-o*c)),t[10]=r*(a*v-l*m)-s*(n*v-o*m)+d*(n*l-o*a),t[11]=-(r*(a*g-l*c)-s*(n*g-o*c)+h*(n*l-o*a)),t[12]=-(s*(c*p-f*m)-h*(a*p-u*m)+d*(a*f-u*c)),t[13]=r*(c*p-f*m)-h*(n*p-i*m)+d*(n*f-i*c),t[14]=-(r*(a*p-u*m)-s*(n*p-i*m)+d*(n*u-i*a)),t[15]=r*(a*f-u*c)-s*(n*f-i*c)+h*(n*u-i*a),t}function m(t){let e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],l=t[8],h=t[9],c=t[10],f=t[11],g=t[12],d=t[13],m=t[14],p=t[15];return(e*s-r*o)*(c*p-f*m)-(e*a-n*o)*(h*p-f*d)+(e*u-i*o)*(h*m-c*d)+(r*a-n*s)*(l*p-f*g)-(r*u-i*s)*(l*m-c*g)+(n*u-i*a)*(l*d-h*g)}function p(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],g=e[10],d=e[11],m=e[12],p=e[13],v=e[14],T=e[15],E=r[0],x=r[1],b=r[2],y=r[3];return t[0]=E*n+x*a+b*c+y*m,t[1]=E*i+x*u+b*f+y*p,t[2]=E*o+x*l+b*g+y*v,t[3]=E*s+x*h+b*d+y*T,E=r[4],x=r[5],b=r[6],y=r[7],t[4]=E*n+x*a+b*c+y*m,t[5]=E*i+x*u+b*f+y*p,t[6]=E*o+x*l+b*g+y*v,t[7]=E*s+x*h+b*d+y*T,E=r[8],x=r[9],b=r[10],y=r[11],t[8]=E*n+x*a+b*c+y*m,t[9]=E*i+x*u+b*f+y*p,t[10]=E*o+x*l+b*g+y*v,t[11]=E*s+x*h+b*d+y*T,E=r[12],x=r[13],b=r[14],y=r[15],t[12]=E*n+x*a+b*c+y*m,t[13]=E*i+x*u+b*f+y*p,t[14]=E*o+x*l+b*g+y*v,t[15]=E*s+x*h+b*d+y*T,t}function v(t,e,r){let n,i,o,s,a,u,l,h,c,f,g,d,m=r[0],p=r[1],v=r[2];return e===t?(t[12]=e[0]*m+e[4]*p+e[8]*v+e[12],t[13]=e[1]*m+e[5]*p+e[9]*v+e[13],t[14]=e[2]*m+e[6]*p+e[10]*v+e[14],t[15]=e[3]*m+e[7]*p+e[11]*v+e[15]):(n=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],g=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=g,t[11]=d,t[12]=n*m+a*p+c*v+e[12],t[13]=i*m+u*p+f*v+e[13],t[14]=o*m+l*p+g*v+e[14],t[15]=s*m+h*p+d*v+e[15]),t}function T(t,e,r){let n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function E(t,e,r,n){let o,s,a,u,l,h,c,f,g,d,m,p,v,T,E,x,b,y,M,_,A,R,w,U,L=n[0],F=n[1],S=n[2],D=Math.sqrt(L*L+F*F+S*S);return Math.abs(D)<i?null:(L*=D=1/D,F*=D,S*=D,o=Math.sin(r),a=1-(s=Math.cos(r)),u=e[0],l=e[1],h=e[2],c=e[3],f=e[4],g=e[5],d=e[6],m=e[7],p=e[8],v=e[9],T=e[10],E=e[11],x=L*L*a+s,b=F*L*a+S*o,y=S*L*a-F*o,M=L*F*a-S*o,_=F*F*a+s,A=S*F*a+L*o,R=L*S*a+F*o,w=F*S*a-L*o,U=S*S*a+s,t[0]=u*x+f*b+p*y,t[1]=l*x+g*b+v*y,t[2]=h*x+d*b+T*y,t[3]=c*x+m*b+E*y,t[4]=u*M+f*_+p*A,t[5]=l*M+g*_+v*A,t[6]=h*M+d*_+T*A,t[7]=c*M+m*_+E*A,t[8]=u*R+f*w+p*U,t[9]=l*R+g*w+v*U,t[10]=h*R+d*w+T*U,t[11]=c*R+m*w+E*U,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function x(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*n,t[5]=s*i+h*n,t[6]=a*i+c*n,t[7]=u*i+f*n,t[8]=l*i-o*n,t[9]=h*i-s*n,t[10]=c*i-a*n,t[11]=f*i-u*n,t}function b(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],u=e[3],l=e[8],h=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*n,t[1]=s*i-h*n,t[2]=a*i-c*n,t[3]=u*i-f*n,t[8]=o*n+l*i,t[9]=s*n+h*i,t[10]=a*n+c*i,t[11]=u*n+f*i,t}function y(t,e,r){let n=Math.sin(r),i=Math.cos(r),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],h=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*n,t[1]=s*i+h*n,t[2]=a*i+c*n,t[3]=u*i+f*n,t[4]=l*i-o*n,t[5]=h*i-s*n,t[6]=c*i-a*n,t[7]=f*i-u*n,t}function M(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function _(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,e,r){let n,o,s,a=r[0],u=r[1],l=r[2],h=Math.sqrt(a*a+u*u+l*l);return Math.abs(h)<i?null:(a*=h=1/h,u*=h,l*=h,n=Math.sin(e),s=1-(o=Math.cos(e)),t[0]=a*a*s+o,t[1]=u*a*s+l*n,t[2]=l*a*s-u*n,t[3]=0,t[4]=a*u*s-l*n,t[5]=u*u*s+o,t[6]=l*u*s+a*n,t[7]=0,t[8]=a*l*s+u*n,t[9]=u*l*s-a*n,t[10]=l*l*s+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function R(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,r){let n=e[0],i=e[1],o=e[2],s=e[3],a=n+n,u=i+i,l=o+o,h=n*a,c=n*u,f=n*l,g=i*u,d=i*l,m=o*l,p=s*a,v=s*u,T=s*l;return t[0]=1-(g+m),t[1]=c+T,t[2]=f-v,t[3]=0,t[4]=c-T,t[5]=1-(h+m),t[6]=d+p,t[7]=0,t[8]=f+v,t[9]=d-p,t[10]=1-(h+g),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function F(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){let r=e[0],n=e[1],i=e[2],o=e[4],s=e[5],a=e[6],u=e[8],l=e[9],h=e[10];return t[0]=Math.sqrt(r*r+n*n+i*i),t[1]=Math.sqrt(o*o+s*s+a*a),t[2]=Math.sqrt(u*u+l*l+h*h),t}function D(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function P(t,e,r,n){let i=e[0],o=e[1],s=e[2],a=e[3],u=i+i,l=o+o,h=s+s,c=i*u,f=i*l,g=i*h,d=o*l,m=o*h,p=s*h,v=a*u,T=a*l,E=a*h,x=n[0],b=n[1],y=n[2];return t[0]=(1-(d+p))*x,t[1]=(f+E)*x,t[2]=(g-T)*x,t[3]=0,t[4]=(f-E)*b,t[5]=(1-(c+p))*b,t[6]=(m+v)*b,t[7]=0,t[8]=(g+T)*y,t[9]=(m-v)*y,t[10]=(1-(c+d))*y,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function I(t,e,r,n,i){let o=e[0],s=e[1],a=e[2],u=e[3],l=o+o,h=s+s,c=a+a,f=o*l,g=o*h,d=o*c,m=s*h,p=s*c,v=a*c,T=u*l,E=u*h,x=u*c,b=n[0],y=n[1],M=n[2],_=i[0],A=i[1],R=i[2];return t[0]=(1-(m+v))*b,t[1]=(g+x)*b,t[2]=(d-E)*b,t[3]=0,t[4]=(g-x)*y,t[5]=(1-(f+v))*y,t[6]=(p+T)*y,t[7]=0,t[8]=(d+E)*M,t[9]=(p-T)*M,t[10]=(1-(f+m))*M,t[11]=0,t[12]=r[0]+_-(t[0]*_+t[4]*A+t[8]*R),t[13]=r[1]+A-(t[1]*_+t[5]*A+t[9]*R),t[14]=r[2]+R-(t[2]*_+t[6]*A+t[10]*R),t[15]=1,t}function C(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=r+r,a=n+n,u=i+i,l=r*s,h=n*s,c=n*a,f=i*s,g=i*a,d=i*u,m=o*s,p=o*a,v=o*u;return t[0]=1-c-d,t[1]=h+v,t[2]=f-p,t[3]=0,t[4]=h-v,t[5]=1-l-d,t[6]=g+m,t[7]=0,t[8]=f+p,t[9]=g-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function X(t,e,r,n,i,o,s){let a=1/(r-e),u=1/(i-n),l=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*a,t[9]=(i+n)*u,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0,t}function B(t,e,r,n,i){let o=1/Math.tan(e/2),s=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*s,t[15]=0,t}function N(t,e,r,n){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),u=2/(s+a),l=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(s-a)*u*.5,t[9]=(i-o)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function G(t,e,r,n,i,o,s){let a=1/(e-r),u=1/(n-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*a,t[13]=(i+n)*u,t[14]=(s+o)*l,t[15]=1,t}function O(t,e,r,n){let o,s,a,u,l,h,c,f,g,d,m=e[0],p=e[1],v=e[2],T=n[0],E=n[1],x=n[2],b=r[0],y=r[1],M=r[2];return Math.abs(m-b)<i&&Math.abs(p-y)<i&&Math.abs(v-M)<i?mat4.identity(t):(c=m-b,f=p-y,g=v-M,o=E*(g*=d=1/Math.sqrt(c*c+f*f+g*g))-x*(f*=d),s=x*(c*=d)-T*g,a=T*f-E*c,(d=Math.sqrt(o*o+s*s+a*a))?(o*=d=1/d,s*=d,a*=d):(o=0,s=0,a=0),u=f*a-g*s,l=g*o-c*a,h=c*s-f*o,(d=Math.sqrt(u*u+l*l+h*h))?(u*=d=1/d,l*=d,h*=d):(u=0,l=0,h=0),t[0]=o,t[1]=u,t[2]=c,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=a,t[9]=h,t[10]=g,t[11]=0,t[12]=-(o*m+s*p+a*v),t[13]=-(u*m+l*p+h*v),t[14]=-(c*m+f*p+g*v),t[15]=1,t)}function q(t,e,r,n){let i=e[0],o=e[1],s=e[2],a=n[0],u=n[1],l=n[2],h=i-r[0],c=o-r[1],f=s-r[2],g=h*h+c*c+f*f;g>0&&(h*=g=1/Math.sqrt(g),c*=g,f*=g);let d=u*f-l*c,m=l*h-a*f,p=a*c-u*h;return t[0]=d,t[1]=m,t[2]=p,t[3]=0,t[4]=c*p-f*m,t[5]=f*d-h*p,t[6]=h*m-c*d,t[7]=0,t[8]=h,t[9]=c,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1,t}function k(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Y(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function W(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function j(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function z(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function V(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function H(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function K(t,e){let r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],u=t[5],l=t[6],h=t[7],c=t[8],f=t[9],g=t[10],d=t[11],m=t[12],p=t[13],v=t[14],T=t[15],E=e[0],x=e[1],b=e[2],y=e[3],M=e[4],_=e[5],A=e[6],R=e[7],w=e[8],U=e[9],L=e[10],F=e[11],S=e[12],D=e[13],P=e[14],I=e[15];return Math.abs(r-E)<=i*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(n-x)<=i*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-b)<=i*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-y)<=i*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(a-M)<=i*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-_)<=i*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(l-A)<=i*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-R)<=i*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(c-w)<=i*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(f-U)<=i*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(g-L)<=i*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(d-F)<=i*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(m-S)<=i*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(p-D)<=i*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-P)<=i*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(T-I)<=i*Math.max(1,Math.abs(T),Math.abs(I))}const Q=p,Z=j;function $(){let t=new o(3);return t[0]=0,t[1]=0,t[2]=0,t}function J(t,e,r){let n=new o(3);return n[0]=t,n[1]=e,n[2]=r,n}function tt(t,e){let r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function et(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rt(t,e,r){let n=e[0],i=e[1],o=e[2],s=r[0],a=r[1],u=r[2];return t[0]=i*u-o*a,t[1]=o*s-n*u,t[2]=n*a-i*s,t}const nt=function(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)};!function(){let t=$()}();function it(t,e){let r=e[0],n=e[1],i=e[2],o=e[3],s=r*r+n*n+i*i+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=o*s),t}!function(){let t=function(){let t=new o(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}()}();function ot(){let t=new o(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function st(t,e,r,n){let i,o,s,a,u,l=e[0],h=e[1],c=e[2],f=e[3],g=r[0],d=r[1],m=r[2],p=r[3];return(o=l*g+h*d+c*m+f*p)<0&&(o=-o,g=-g,d=-d,m=-m,p=-p),1-o>1e-6?(i=Math.acos(o),s=Math.sin(i),a=Math.sin((1-n)*i)/s,u=Math.sin(n*i)/s):(a=1-n,u=n),t[0]=a*l+u*g,t[1]=a*h+u*d,t[2]=a*c+u*m,t[3]=a*f+u*p,t}const at=it;(function(){let t=$(),e=J(1,0,0),r=J(0,1,0)})(),function(){let t=ot(),e=ot()}(),function(){let t=function(){let t=new o(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}()}();!function(){let t=function(){let t=new o(2);return t[0]=0,t[1]=0,t}()}();var ut=function(){function t(t){this.gl=t,this.isSlotUsed={},this.maxTextures=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)}return t.prototype.getNewSlot=function(){for(var t=0;this.isSlotUsed[t];)t++;return t===this.maxTextures&&console.warn("Max slots exceeded"),this.isSlotUsed[t]=!0,t},t.prototype.freeSlot=function(t){if(t>this.maxTextures)throw new RangeError("Invalid slot number");this.isSlotUsed[t]=!1},t}(),lt=r(12);(new Image).src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";var ht=function(){return function(t,e,r,n){this.name=t,this.texture=e,this.id=r,this.data=n,this.type="image"}}(),ct=function(){return function(t,e,r,n){this.name=t,this.texture=e,this.id=r,this.data=n,this.type="video"}}();var ft,gt=function(){function t(t,e){this.gl=t,this.slot=e,this.textures=[],this.isTextureLoaded={},this.isTextureUpdated={},this.isTextureVideo={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.maxTextures=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)}return t.prototype.loadTexture=function(t,e){return lt(e)?this.loadVideoTexture(t,e):this.loadImageTexture(t,e)},t.prototype.loadImageTexture=function(t,e){var r=this,n=this.gl.createTexture();if(!n)throw new Error("Failed to run gl.createTexture");var i=this.slot.getNewSlot(),o=new Image;return o.src=e,this.isTextureLoaded[i]=!0,new Promise(function(e){o.onload=function(){var s=new ht(t,n,i,o);r.textures[i]=s,r.bindTexture(n,o),r.isTextureUpdated[i]=!0,e(s)}})},t.prototype.loadVideoTexture=function(t,e){var r=this,n=this.gl.createTexture();if(!n)throw new Error("Failed to run gl.createTexture");var i=this.textures.find(function(e){return!!e&&e.name===t});if(i)return Promise.resolve(i);var o=this.slot.getNewSlot(),s=document.createElement("video");return s.src=e,s.muted=!0,s.loop=!0,s.style.position="fixed",s.style.top="-100000%",s.style.left="-100000%",document.body.appendChild(s),this.isTextureLoaded[o]=!0,new Promise(function(e){s.addEventListener("canplaythrough",function(){s.play();var i=new ct(t,n,o,s);r.textures[o]=i,r.bindTexture(n,s),r.isTextureUpdated[o]=!0,r.isTextureVideo[o]=!0,e(i)})})},t.prototype.bindTexture=function(t,e){this.gl.isTexture(t),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},t.prototype.unloadTexture=function(t){var e=this;this.textures.forEach(function(r){r&&r.name===t&&(e.isTextureLoaded[r.id]=!1,e.gl.deleteTexture(r.texture),function(t){return"video"===t.type}(r)&&(r.data.pause(),r.data.remove()),e.textures[r.id]=null,e.slot.freeSlot(r.id))})},t.prototype.getUpdatedTextures=function(){var t=this;this.textures.forEach(function(e){e&&t.isTextureVideo[e.id]&&t.isTextureLoaded[e.id]&&(t.bindTexture(e.texture,e.data),t.isTextureUpdated[e.id]=!0)});var e=this.textures.filter(function(e){return e&&t.isTextureUpdated[e.id]});return this.isTextureUpdated={},e},t}(),dt=function(){function t(t,e,r,n){this.gl=t,this.slotAllocator=e,this.width=r,this.height=n,this.slot=e.getNewSlot(),this.framebuffer=this.createFramebuffer(),this.textures=[this.createTexture(),this.createTexture()],this.bindTextureToFramebuffer()}return t.prototype.createFramebuffer=function(){var t=this.gl.createFramebuffer();if(!t)throw new Error("Failed to run gl.createFramebuffer");return t},t.prototype.createTexture=function(){var t=this.gl.createTexture();if(!t)throw new Error("Failed to run gl.createTexture");return this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t},t.prototype.bindTextureToFramebuffer=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.textures[0],0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)},t.prototype.update=function(){this.textures=[this.textures[1],this.textures[0]],this.bindTextureToFramebuffer()},t.prototype.resize=function(t,e){var r=this;this.width=t,this.height=e,this.textures.forEach(function(n){r.gl.bindTexture(r.gl.TEXTURE_2D,n),r.gl.texImage2D(r.gl.TEXTURE_2D,0,r.gl.RGBA,t,e,0,r.gl.RGBA,r.gl.UNSIGNED_BYTE,null)}),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},t.prototype.destroy=function(){this.slotAllocator.freeSlot(this.slot)},t}(),mt=function(){return ft||(ft=new(AudioContext||window.webkitAudioContext)),ft},pt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vt={fftSize:2048,fftSmoothingTimeConstant:.8},Tt=function(){function t(t,e,r){this.gl=t,this.slotAllocator=e,this.isEnabled=!1,this.input=null,this.willPlay=null;var n=pt({},vt,r);this.ctx=mt(),this.gain=this.ctx.createGain(),this.analyser=this.ctx.createAnalyser(),this.analyser.connect(this.gain),this.gain.gain.setValueAtTime(0,this.ctx.currentTime),this.gain.connect(this.ctx.destination),this.analyser.fftSize=n.fftSize,this.analyser.smoothingTimeConstant=n.fftSmoothingTimeConstant,this.samplesArray=new Uint8Array(this.analyser.frequencyBinCount),this.spectrumArray=new Uint8Array(this.analyser.frequencyBinCount),this.samples=this.createTexture(this.analyser.frequencyBinCount,1),this.spectrum=this.createTexture(this.analyser.frequencyBinCount,1)}return t.prototype.createTexture=function(t,e){var r=this.gl.createTexture();if(!r)throw new Error("Failed to run gl.createTexture");return this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,t,e,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),r},t.prototype.enable=function(){var t=this;this.willPlay=new Promise(function(e,r){navigator.mediaDevices.getUserMedia({audio:!0}).then(function(r){t.stream=r,t.input=t.ctx.createMediaStreamSource(r),t.input.connect(t.analyser),t.isEnabled=!0,t.samplesSlot=t.slotAllocator.getNewSlot(),t.spectrumSlot=t.slotAllocator.getNewSlot(),e()},function(t){console.error(t),r()})})},t.prototype.disable=function(){var t=this;this.isEnabled&&this.willPlay&&this.willPlay.then(function(){t.isEnabled=!1,t.input&&t.input.disconnect(),t.stream.getTracks().forEach(function(t){return t.stop()}),t.slotAllocator.freeSlot(t.samplesSlot),t.slotAllocator.freeSlot(t.spectrumSlot)})},t.prototype.update=function(t){if(this.isEnabled){this.analyser.getByteTimeDomainData(this.samplesArray),this.analyser.getByteFrequencyData(this.spectrumArray);var e=this.gl.getUniformLocation(t,"samples");this.gl.activeTexture(this.gl.TEXTURE0+this.samplesSlot),this.gl.bindTexture(this.gl.TEXTURE_2D,this.samples),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,this.samplesArray.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,this.samplesArray),this.gl.uniform1i(e,this.samplesSlot);var r=this.gl.getUniformLocation(t,"spectrum");this.gl.activeTexture(this.gl.TEXTURE0+this.spectrumSlot),this.gl.bindTexture(this.gl.TEXTURE_2D,this.spectrum),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,this.spectrumArray.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,this.spectrumArray),this.gl.uniform1i(r,this.spectrumSlot)}},t.prototype.getVolume=function(){return this.spectrumArray.reduce(function(t,e){return t+e},0)/this.spectrumArray.length},t.prototype.setFftSize=function(t){this.gl.deleteTexture(this.samples),this.gl.deleteTexture(this.spectrum),this.analyser.fftSize=t,this.samplesArray=new Uint8Array(this.analyser.frequencyBinCount),this.spectrumArray=new Uint8Array(this.analyser.frequencyBinCount),this.samples=this.createTexture(this.analyser.frequencyBinCount,1),this.spectrum=this.createTexture(this.analyser.frequencyBinCount,1)},t.prototype.setFftSmoothingTimeConstant=function(t){this.analyser.smoothingTimeConstant=t},t}(),Et=function(){function t(t,e){this.gl=t,this.slotAllocator=e,this.isEnabled=!1,this.willPlay=null,this.video=document.createElement("video"),this.video.classList.add("veda-video-source"),this.video.loop=!0,this.video.muted=!0,this.video.style.position="fixed",this.video.style.top="-100000%",this.video.style.left="-100000%",document.body.appendChild(this.video),this.texture=this.createTexture(1,1)}return t.prototype.createTexture=function(t,e){var r=this.gl.createTexture();if(!r)throw new Error("Failed to run gl.createTexture");return this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGB,this.gl.RGB,this.gl.UNSIGNED_BYTE,this.video),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.bindTexture(this.gl.TEXTURE_2D,null),r},t.prototype.enable=function(){var t=this;this.willPlay=new Promise(function(e,r){navigator.mediaDevices.getUserMedia({video:!0}).then(function(r){t.stream=r,t.video.src=window.URL.createObjectURL(r),t.video.play(),t.slot=t.slotAllocator.getNewSlot(),t.isEnabled=!0,e()},function(t){console.error(t),r()})})},t.prototype.disable=function(){var t=this;this.isEnabled&&this.willPlay&&this.willPlay.then(function(){t.isEnabled=!1,t.stream.getTracks().forEach(function(t){return t.stop()}),t.slotAllocator.freeSlot(t.slot)})},t.prototype.update=function(t){if(this.isEnabled){var e=this.gl.getUniformLocation(t,"camera");this.gl.activeTexture(this.gl.TEXTURE0+this.slot),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGB,this.gl.RGB,this.gl.UNSIGNED_BYTE,this.video),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.uniform1i(e,this.slot)}},t}(),xt={vs:r(0),fs:r(1)},bt=Date.now()/1e3,yt=function(){function t(t){var e=this;this.element=t,this.isPlaying=!1,this.isLoading=!1,this.frame=0,this.onMouseMove=function(t){e.setUniform("mouse","v2",{x:t.offsetX/e.canvas.offsetWidth,y:1-t.offsetY/e.canvas.offsetHeight})},this.render=function(){e.frame++,e.isPlaying&&(e.frame%1==0?(e.updateUniforms(),e.gl.bindFramebuffer(e.gl.FRAMEBUFFER,e.backbuffer.framebuffer),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.drawArrays(e.gl.TRIANGLES,0,3),e.gl.drawArrays(e.gl.TRIANGLES,3,3),e.gl.bindFramebuffer(e.gl.FRAMEBUFFER,null),e.gl.clear(e.gl.COLOR_BUFFER_BIT|e.gl.DEPTH_BUFFER_BIT),e.gl.drawArrays(e.gl.TRIANGLES,0,3),e.gl.drawArrays(e.gl.TRIANGLES,3,3),e.gl.flush(),requestAnimationFrame(e.render)):requestAnimationFrame(e.render))},this.resize=function(){e.canvas.width=e.canvas.offsetWidth,e.canvas.height=e.canvas.offsetHeight,e.gl.viewport(0,0,e.canvas.width,e.canvas.height),e.backbuffer.resize(e.canvas.offsetWidth,e.canvas.offsetHeight),e.mvpMatrix=e.createMvpMatrix()},this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.width="100%",this.canvas.style.height="100%",t.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl2"),this.slot=new ut(this.gl),this.textureLoader=new gt(this.gl,this.slot),this.backbuffer=new dt(this.gl,this.slot,this.canvas.offsetWidth,this.canvas.offsetHeight),this.audioLoader=new Tt(this.gl,this.slot,{}),this.cameraLoader=new Et(this.gl,this.slot),this.gl.clearColor(0,0,0,1),this.gl.clearDepth(1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.program=this.createProgramFromShaders(xt),this.mvpMatrix=this.createMvpMatrix(),this.resize(),this.resizeObserver=new window.ResizeObserver(this.resize),this.resizeObserver.observe(this.canvas),this.canvas.addEventListener("mousemove",this.onMouseMove)}return t.prototype.loadShader=function(t){var e=t.vs,r=t.fs;this.isLoading=!0,this.program=this.createProgramFromShaders({vs:e,fs:r})},t.prototype.createProgramFromShaders=function(t){var e=t.vs,r=t.fs,n=this.createVs(e),i=this.createFs(r),o=this.createProgram(n,i),s=[1,1,0].concat([1,-1,0],[-1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]).map(function(t){return 9999*t}),a=this.createVbo(s);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a);var u=this.gl.getAttribLocation(o,"position");return this.gl.enableVertexAttribArray(u),this.gl.vertexAttribPointer(u,3,this.gl.FLOAT,!1,0,0),o},t.prototype.loadTexture=function(t,e){return this.textureLoader.loadTexture(t,e)},t.prototype.unloadTexture=function(t){this.textureLoader.unloadTexture(t)},t.prototype.createVs=function(t){var e=this.gl.createShader(this.gl.VERTEX_SHADER);if(!e)throw new Error("Failed to run gl.createShader");return this.gl.shaderSource(e,t),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)||console.log(this.gl.getShaderInfoLog(e)),e},t.prototype.createFs=function(t){var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);if(!e)throw new Error("Failed to run gl.createShader");return this.gl.shaderSource(e,t),this.gl.compileShader(e),this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS)||console.log(this.gl.getShaderInfoLog(e)),e},t.prototype.createProgram=function(t,e){var r=this.gl.createProgram();if(!r)throw new Error("Failed to run gl.createProgram");return this.gl.attachShader(r,t),this.gl.attachShader(r,e),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)||console.error(this.gl.getProgramInfoLog(r)),this.gl.useProgram(r),r},t.prototype.createVbo=function(t){var e=this.gl.createBuffer();if(!e)throw new Error("Failed to run gl.createBuffer");return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e},t.prototype.setUniform=function(t,e,r){var n=this.gl.getUniformLocation(this.program,t);if(n)switch(e){case"f":this.gl.uniform1f(n,r);break;case"v2":this.gl.uniform2f(n,r.x,r.y);break;case"m4":this.gl.uniformMatrix4fv(n,!1,r);break;case"t":this.gl.activeTexture(this.gl.TEXTURE0+r.id),this.gl.bindTexture(this.gl.TEXTURE_2D,r.texture),this.gl.uniform1i(n,r.id);break;default:console.log('Uniform type "'+e+'" is unsupported')}},t.prototype.updateUniforms=function(){var t=this;this.setUniform("mvpMatrix","m4",this.mvpMatrix),this.setUniform("time","f",Date.now()/1e3-bt),this.setUniform("resolution","v2",{x:this.canvas.offsetWidth,y:this.canvas.offsetHeight}),this.textureLoader.getUpdatedTextures().forEach(function(e){t.setUniform(e.name,"t",e)}),this.audioLoader.update(this.program),this.cameraLoader.update(this.program),this.backbuffer.update();var e=this.gl.getUniformLocation(this.program,"backbuffer");this.gl.activeTexture(this.gl.TEXTURE0+this.backbuffer.slot),this.gl.bindTexture(this.gl.TEXTURE_2D,this.backbuffer.textures[1]),this.gl.uniform1i(e,this.backbuffer.slot)},t.prototype.start=function(){this.isPlaying=!0,requestAnimationFrame(this.render)},t.prototype.stop=function(){this.isPlaying=!1},t.prototype.createMvpMatrix=function(){var t=n.create(),e=n.create(),r=n.create(),i=n.create();return n.lookAt(e,[0,0,1],[0,0,0],[0,1,0]),n.perspective(r,.5*Math.PI,this.canvas.offsetWidth/this.canvas.offsetHeight,.1,1e3),n.mul(i,r,e),n.mul(i,t,i),i},t.prototype.toggleAudio=function(t){t?this.audioLoader.enable():this.audioLoader.disable()},t.prototype.toggleCamera=function(t){t?this.cameraLoader.enable():this.cameraLoader.disable()},t}(),Mt=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})},_t=function(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},At={shader1:{vs:r(0),fs:r(1)},mouse:{vs:r(0),fs:r(8)},backbuffer:{vs:r(0),fs:r(7)},image:{vs:r(0),fs:r(6),imported:{lena:"./cat.jpg"}},video:{vs:r(0),fs:r(5),imported:{video1:"./videos/1.mp4",video2:"./videos/2.mp4",video3:"./videos/3.mp4"}},audio:{vs:r(0),fs:r(4)},camera:{vs:r(0),fs:r(3)}},Rt=[];window.addEventListener("load",function(){var t=document.getElementById("main"),e=new yt(t);Array.from(document.querySelectorAll("#menu li")).forEach(function(t){t.addEventListener("click",function(){return function(t,e){return Mt(void 0,void 0,void 0,function(){var r,n,i,o,s,a;return _t(this,function(u){return n=(r=At[e]).vs,i=r.fs,o=r.imported,s=void 0===o?{}:o,a=[],[2,Promise.all(Object.keys(s).map(function(e){return a.push(e),t.loadTexture(e,s[e])})).then(function(){t.loadShader({vs:n,fs:i}),Rt.forEach(function(e){-1===a.indexOf(e)&&t.unloadTexture(e)}),Rt=a})]})})}(e,t.innerText)})}),e.start(),e.toggleAudio(!0),e.toggleCamera(!0),t.addEventListener("click",function(){return e.isPlaying?e.stop():e.start()})})},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D camera;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / resolution;\n    fragColor = fract(texture(camera, uv) * 3. + time);\n    fragColor.r *= .7;\n    fragColor.a = 1.;\n}\n"},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2  resolution;\nuniform sampler2D spectrum;\nuniform sampler2D samples;\nuniform float volume;\nout vec4 fragColor;\n\nvoid main (void) {\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n    float freq = texture(spectrum, vec2(uv.x, .5)).r;\n    float wave = texture(samples, vec2(uv.x, .5)).r;\n\n    float r = 1. - step(0.01, abs(wave - uv.y));\n    float g = 1. - step(0.01, abs(freq - uv.y));\n    float b = 1. - step(0.01, abs(volume / 255. - uv.y));\n\n    fragColor = vec4(r, g, b, 1.);\n}\n"},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D video1;\nuniform sampler2D video2;\nuniform sampler2D video3;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / resolution;\n    vec4 v1 = texture(video1, uv);\n    vec4 v2 = texture(video2, uv);\n    vec4 v3 = texture(video3, uv);\n    fragColor = vec4(\n      v1.r + v2.r,\n      v2.g + v3.g,\n      v3.b + v1.b,\n      1\n    );\n}\n"},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D lena;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / resolution;\n    uv.y = 1. - uv.y;\n    uv.y *= .5;\n    fragColor = texture(lena, fract(uv + time * -.1));\n}\n"},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform sampler2D backbuffer;\nout vec4 fragColor;\n\nfloat draw(in vec2 p, in float t) {\n  float c = 0.;\n  c += 0.03 / length(p - vec2(sin(t * 2.), cos(t * 3.)));\n  c += 0.03 / length(p - vec2(sin(t * 1.3), cos(t * 2.8)));\n  c += 0.03 / length(p - vec2(sin(t * 3.9), cos(t * 1.7)));\n  c += 0.03 / length(p - vec2(cos(t * 3.47), sin(t * 3.9)));\n  return c;\n}\n\nvoid main() {\n  vec2 p = (gl_FragCoord.xy * 2. - resolution) / min(resolution.x, resolution.y);\n  float t = time * .1;\n\n  float c = (\n    draw(p, t) +\n    draw(p * vec2(1, -1), t + .2) +\n    draw(p * vec2(-1, 1), t + .4) +\n    draw(p * vec2(-1, -1), t + .5)\n  );\n\n  float d = .4;\n  c = smoothstep(d, d + .01, c * c * c);\n\n  vec4 b = texture(backbuffer, gl_FragCoord.xy / resolution);\n\n  fragColor = vec4(c * vec3(0.2, 0.3, 0.8), 1) + b * 0.9;\n  fragColor.r = texture(backbuffer, gl_FragCoord.xy / resolution + .03).g;\n}\n"},function(t,e){t.exports="#version 300 es\nprecision mediump float;\n#define GLSLIFY 1\nuniform float time;\nuniform vec2 resolution;\nuniform vec2 mouse;\nout vec4 fragColor;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution;\n  float t = time * 1.7;\n\n  vec3 c = .08 / (\n    vec3(1,1,0) * length(uv - mouse + .04 * vec2(sin(t * 1.3), cos(t * 0.7))) +\n    vec3(1,0,1) * length(uv - mouse + .04 * vec2(cos(t * 2.3), sin(t * 1.7))) +\n    vec3(0,1,1) * length(uv - mouse + .04 * vec2(sin(t * 3.3), sin(t * 2.7)))\n  );\n\n  fragColor = vec4(c, 1);\n}\n"},function(t){t.exports=["3g2","3gp","aaf","asf","avchd","avi","drc","flv","m2v","m4p","m4v","mkv","mng","mov","mp2","mp4","mpe","mpeg","mpg","mpv","mxf","nsv","ogg","ogv","qt","rm","rmvb","roq","svi","vob","webm","wmv","yuv"]},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,l=[],h=!1,c=-1;function f(){h&&u&&(h=!1,u.length?l=u.concat(l):c=-1,l.length&&g())}function g(){if(!h){var t=a(f);h=!0;for(var e=l.length;e;){for(u=l,l=[];++c<e;)u&&u[c].run();c=-1,e=l.length}u=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||h||a(g)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,n="/"===s.charAt(0))}return e=r(o(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),i="/"===s(t,-1);return(t=r(o(t.split("/"),function(t){return!!t}),!n).join("/"))||n||(t="."),t&&i&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}var l=[];for(u=a;u<i.length;u++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),r=e[0],n=e[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},e.basename=function(t,e){var r=i(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(10))},function(t,e,r){"use strict";var n=r(11),i=r(9),o=Object.create(null);i.forEach(function(t){o[t]=!0}),t.exports=function(t){return n.extname(t).slice(1).toLowerCase()in o}}]);